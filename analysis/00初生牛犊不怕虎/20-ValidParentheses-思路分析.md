# 20. æœ‰æ•ˆçš„æ‹¬å· (Valid Parentheses)

## ğŸ“‹ é¢˜ç›®ä¿¡æ¯
- **éš¾åº¦**ï¼šç®€å• (Easy)
- **æ ‡ç­¾**ï¼šæ ˆ (Stack)ã€å­—ç¬¦ä¸² (String)
- **æ¥æº**ï¼šLeetCode

## ğŸ“– é¢˜ç›®æè¿°

ç»™å®šä¸€ä¸ªåªåŒ…æ‹¬ `'('`ï¼Œ`')'`ï¼Œ`'{'`ï¼Œ`'}'`ï¼Œ`'['`ï¼Œ`']'` çš„å­—ç¬¦ä¸² `s` ï¼Œåˆ¤æ–­å­—ç¬¦ä¸²æ˜¯å¦æœ‰æ•ˆã€‚

æœ‰æ•ˆå­—ç¬¦ä¸²éœ€æ»¡è¶³ï¼š
1. å·¦æ‹¬å·å¿…é¡»ç”¨ç›¸åŒç±»å‹çš„å³æ‹¬å·é—­åˆã€‚
2. å·¦æ‹¬å·å¿…é¡»ä»¥æ­£ç¡®çš„é¡ºåºé—­åˆã€‚
3. æ¯ä¸ªå³æ‹¬å·éƒ½æœ‰ä¸€ä¸ªå¯¹åº”çš„ç›¸åŒç±»å‹çš„å·¦æ‹¬å·ã€‚

### ç¤ºä¾‹

**ç¤ºä¾‹ 1ï¼š**
```
è¾“å…¥ï¼šs = "()"
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 2ï¼š**
```
è¾“å…¥ï¼šs = "()[]{}"
è¾“å‡ºï¼štrue
```

**ç¤ºä¾‹ 3ï¼š**
```
è¾“å…¥ï¼šs = "(]"
è¾“å‡ºï¼šfalse
```

### çº¦æŸæ¡ä»¶
- `1 <= s.length <= 10^4`
- `s` ä»…ç”±æ‹¬å· `'()[]{}'` ç»„æˆ

---

## ğŸ¤” é¢˜ç›®åˆ†æ

### é—®é¢˜ç†è§£
æˆ‘ä»¬éœ€è¦æ£€æŸ¥ä¸€ä¸ªåŒ…å«å„ç§æ‹¬å·çš„å­—ç¬¦ä¸²æ˜¯å¦ç¬¦åˆé€»è¾‘è§„åˆ™ã€‚è§„åˆ™çš„æ ¸å¿ƒæ˜¯ï¼š**åé‡åˆ°çš„å·¦æ‹¬å·ï¼Œå¿…é¡»å…ˆè¢«é—­åˆ**ã€‚ä¾‹å¦‚åœ¨ `([{}])` ä¸­ï¼Œæœ€åå‡ºç°çš„ `{` å¿…é¡»æœ€å…ˆè¢« `}` é—­åˆã€‚

### å…³é”®è§‚å¯Ÿ
è¿™ç§â€œåè¿›å…ˆå‡ºâ€çš„å¤„ç†é¡ºåºï¼Œå®Œç¾å¯¹åº”äº†è®¡ç®—æœºç§‘å­¦ä¸­çš„ä¸€ç§åŸºç¡€æ•°æ®ç»“æ„ â€”â€” **æ ˆ (Stack)**ã€‚

---

## ğŸ’¡ è§£é¢˜æ€è·¯

### ğŸŒŸ å½¢è±¡åŒ–ç†è§£ï¼šå ç›˜å­

**åœºæ™¯ç±»æ¯”**ï¼š
- **å·¦æ‹¬å·** `(`, `[`, `{` = **æ´—å¥½ä¸€ä¸ªç›˜å­æ”¾è¿›å †é‡Œ**ã€‚
- **å³æ‹¬å·** `)`, `]`, `}` = **ä»å †é¡¶å–å‡ºä¸€ä¸ªç›˜å­æ“¦å¹²**ã€‚
- **åŒ¹é…è§„åˆ™**ï¼šå½“ä½ æ‹¿ç€ä¸€ä¸ªåœ†å½¢çš„æŠ¹å¸ƒï¼ˆå³åœ†æ‹¬å·ï¼‰æ—¶ï¼Œå †é¡¶çš„ç›˜å­å¿…é¡»æ˜¯åœ†å½¢çš„ï¼ˆå·¦åœ†æ‹¬å·ï¼‰ã€‚å¦‚æœå †é¡¶æ˜¯æ–¹å½¢ç›˜å­ï¼Œæˆ–è€…å †é‡Œæ²¡ç›˜å­äº†ï¼Œå°±å‡ºé”™äº†ã€‚

### ç®—æ³•æ­¥éª¤

1. **åˆå§‹åŒ–**ï¼šåˆ›å»ºä¸€ä¸ªæ ˆ `stack`ã€‚åˆ›å»ºä¸€ä¸ªæ˜ å°„è¡¨ `pairs`ï¼Œè®°å½•å³æ‹¬å·åˆ°å·¦æ‹¬å·çš„å¯¹åº”å…³ç³»ï¼ˆå¦‚ `')'` å¯¹åº” `'('`ï¼‰ã€‚
2. **éå†å­—ç¬¦ä¸²**ï¼š
3. **é‡åˆ°å³æ‹¬å·**ï¼ˆåœ¨æ˜ å°„è¡¨ä¸­ï¼‰ï¼š
   - æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©ºï¼Œæˆ–æ ˆé¡¶å…ƒç´ æ˜¯å¦ä¸å½“å‰å³æ‹¬å·åŒ¹é…ã€‚
   - å¦‚æœä¸åŒ¹é…æˆ–æ ˆä¸ºç©ºï¼Œè¿”å› `False`ã€‚
   - å¦‚æœåŒ¹é…ï¼Œå°†æ ˆé¡¶å…ƒç´ å¼¹å‡ºï¼ˆç›˜å­æ“¦å®Œäº†ï¼‰ã€‚
4. **é‡åˆ°å·¦æ‹¬å·**ï¼š
   - ç›´æ¥å‹å…¥æ ˆä¸­ï¼ˆå ç›˜å­ï¼‰ã€‚
5. **æœ€ç»ˆç»“æœ**ï¼š
   - éå†å®Œåï¼Œæ ˆå¿…é¡»ä¸ºç©ºï¼ˆç›˜å­å…¨æ´—å®Œäº†ï¼‰æ‰ç®—æœ‰æ•ˆã€‚

---

## âœï¸ ä»£ç æ¡†æ¶å¡«ç©º

> **ğŸ’¡ å­¦ä¹ æç¤º**ï¼šä¸‹æ–¹çš„å¡«ç©ºä»£ç ç»“æ„ä¸éšåçš„å®Œæ•´ä»£ç å®ç°**å®Œå…¨ä¸€è‡´**ã€‚è¯·å°è¯•è¡¥å…¨å…³é”®é€»è¾‘ã€‚

### Pythonå¡«ç©ºç‰ˆ

```python
class Solution:
    def isValid(self, s: str) -> bool:
        # å°ä¼˜åŒ–ï¼šå¦‚æœé•¿åº¦æ˜¯å¥‡æ•°ï¼Œè‚¯å®šæ— æ³•é…å¯¹
        if len(s) % 2 != 0:
            return False
            
        # å»ºç«‹æ˜ å°„è¡¨ï¼šå³æ‹¬å· -> å·¦æ‹¬å·
        # ä½œç”¨ï¼šé‡åˆ°å³æ‹¬å·æ—¶ï¼Œå¿«é€ŸæŸ¥æ‰¾å®ƒåº”è¯¥åŒ¹é…çš„å·¦æ‹¬å·
        pairs = {
            ")": "(",
            "]": "[",
            "}": "{"
        }
        
        # ğŸ”¹ å¡«ç©º1ï¼šåˆå§‹åŒ–æ ˆ
        # æç¤ºï¼šPythonä¸­é€šå¸¸ç”¨åˆ—è¡¨ list ä½œä¸ºæ ˆ
        stack = ______ [] # answer 1
        
        for char in s:
            # ğŸ”¹ å¡«ç©º2ï¼šåˆ¤æ–­å½“å‰å­—ç¬¦æ˜¯ å·¦æ‹¬å· è¿˜æ˜¯ å³æ‹¬å·
            # æç¤ºï¼šå¦‚æœæ˜¯å³æ‹¬å·ï¼Œå®ƒåº”è¯¥åœ¨ pairs çš„é”®(keys)ä¸­
            if char in ______: pairs # answer 2
                # === å¤„ç†å³æ‹¬å· ===
                
                # ğŸ”¹ å¡«ç©º3ï¼šå¤±è´¥æ¡ä»¶åˆ¤æ–­
                # æç¤ºï¼šä»€ä¹ˆæ—¶å€™è¿™æ˜¯æ— æ•ˆçš„ï¼Ÿ
                # 1. æ ˆå·²ç»ç©ºäº†ï¼ˆæ²¡æœ‰å·¦æ‹¬å·æ¥åŒ¹é…ï¼‰
                # 2. æ ˆé¡¶å…ƒç´ ï¼ˆstack[-1]ï¼‰ä¸æ˜¯å¯¹åº”çš„å·¦æ‹¬å·ï¼ˆpairs[char]ï¼‰
                if not stack or stack[-1] != ______: pairs[char] # answer 3
                    return False
                
                # ğŸ”¹ å¡«ç©º4ï¼šåŒ¹é…æˆåŠŸ
                # æç¤ºï¼šä¸€å¯¹æ‹¬å·åŒ¹é…æ¶ˆé™¤äº†ï¼Œéœ€è¦å°†æ ˆé¡¶å¼¹å‡º
                stack.______ pop() # answer 4
            else:
                # === å¤„ç†å·¦æ‹¬å· ===
                
                # ğŸ”¹ å¡«ç©º5ï¼šå…¥æ ˆæ“ä½œ
                # æç¤ºï¼šé‡åˆ°å·¦æ‹¬å·ï¼Œå°†å…¶æ”¾å…¥æ ˆé¡¶
                stack.append(______) char # answer 5
        
        # ğŸ”¹ å¡«ç©º6ï¼šè¿”å›ç»“æœ
        # æç¤ºï¼šæ‰€æœ‰å­—ç¬¦å¤„ç†å®Œåï¼Œæ ˆåº”è¯¥æ˜¯ç©ºçš„æ‰å¯¹
        return not ______ stack # answer 6
```

### C++å¡«ç©ºç‰ˆ

```cpp
class Solution {
public:
    bool isValid(string s) {
        // å°ä¼˜åŒ–
        if (s.length() % 2 != 0) return false;
        
        // ğŸ”¹ å¡«ç©º1ï¼šåˆå§‹åŒ–æ ˆ
        stack<char> stk;
        
        for (char c : s) {
            // ğŸ”¹ å¡«ç©º2ï¼šåˆ¤æ–­æ˜¯å¦ä¸ºå·¦æ‹¬å·
            if (c == '(' || c == '{' || c == '[') {
                // å·¦æ‹¬å·ç›´æ¥å…¥æ ˆ
                stk.______(c); push // answer 2
            } else {
                // === å¤„ç†å³æ‹¬å· ===
                
                // ğŸ”¹ å¡«ç©º3ï¼šåˆ¤ç©º
                // æç¤ºï¼šå¦‚æœæ ˆç©ºäº†ï¼Œè¯´æ˜å³æ‹¬å·å¤šäº†
                if (stk.______) return false; empty() // answer 3
                
                // è·å–æ ˆé¡¶å…ƒç´ 
                char top = stk.top();
                
                // ğŸ”¹ å¡«ç©º4ï¼šåŒ¹é…é€»è¾‘
                // æç¤ºï¼šæ£€æŸ¥å½“å‰å³æ‹¬å· c å’Œæ ˆé¡¶ top æ˜¯å¦åŒ¹é…
                // ä¾‹å¦‚ï¼šå¦‚æœ c æ˜¯ ')' ä¸” top ä¸æ˜¯ '('ï¼Œåˆ™å¤±è´¥
                if ((c == ')' && top != '(') ||
                    (c == ']' && top != '[') ||
                    (c == '}' && top != '{')) {
                    return false;
                }
                
                // ğŸ”¹ å¡«ç©º5ï¼šåŒ¹é…æˆåŠŸï¼Œå¼¹å‡ºæ ˆé¡¶
                stk.______(); pop // answer 5
            }
        }
        
        // ğŸ”¹ å¡«ç©º6ï¼šè¿”å›ç»“æœ
        // æç¤ºï¼šæ ˆå¿…é¡»ä¸ºç©ºæ‰ç®—æœ‰æ•ˆ
        return stk.______(); empty // answer 6
    }
};
```

---

## ğŸ’» å®Œæ•´ä»£ç å®ç°

> **âœ… å¯¹ç…§æ£€æŸ¥**ï¼šç°åœ¨è¯·å¯¹æ¯”æ‚¨çš„å¡«ç©ºç­”æ¡ˆã€‚

### Pythonå®ç°

```python
class Solution:
    def isValid(self, s: str) -> bool:
        # å°ä¼˜åŒ–ï¼šå¦‚æœé•¿åº¦æ˜¯å¥‡æ•°ï¼Œè‚¯å®šæ— æ³•é…å¯¹
        if len(s) % 2 != 0:
            return False
            
        # å»ºç«‹æ˜ å°„è¡¨ï¼šå³æ‹¬å· -> å·¦æ‹¬å·
        pairs = {
            ")": "(",
            "]": "[",
            "}": "{"
        }
        
        # åˆå§‹åŒ–æ ˆ
        stack = []
        
        for char in s:
            # åˆ¤æ–­å½“å‰å­—ç¬¦æ˜¯å¦ä¸ºå³æ‹¬å·
            if char in pairs:
                # === å¤„ç†å³æ‹¬å· ===
                
                # å¤±è´¥æ¡ä»¶ï¼š
                # 1. stackä¸ºç©ºï¼ˆæ²¡æœ‰å·¦æ‹¬å·ï¼‰
                # 2. æ ˆé¡¶å…ƒç´  stack[-1] ä¸ç­‰äºå½“å‰å³æ‹¬å·å¯¹åº”çš„å·¦æ‹¬å·
                if not stack or stack[-1] != pairs[char]:
                    return False
                
                # åŒ¹é…æˆåŠŸï¼Œå¼¹å‡ºæ ˆé¡¶å…ƒç´ 
                stack.pop()
            else:
                # === å¤„ç†å·¦æ‹¬å· ===
                # ç›´æ¥å…¥æ ˆ
                stack.append(char)
        
        # è¿”å›ç»“æœï¼šæ ˆå¿…é¡»ä¸ºç©ºï¼ˆlen(stack) == 0ï¼‰æ‰ç®—æœ‰æ•ˆ
        # not stack åœ¨ stack ä¸ºç©ºæ—¶è¿”å› True
        return not stack
```

### C++å®ç°

```cpp
#include <stack>
#include <string>
#include <unordered_map>

using namespace std;

class Solution {
public:
    bool isValid(string s) {
        if (s.length() % 2 != 0) return false;
        
        stack<char> stk;
        
        for (char c : s) {
            // åˆ¤æ–­æ˜¯å¦ä¸ºå·¦æ‹¬å·
            if (c == '(' || c == '{' || c == '[') {
                stk.push(c);
            } else {
                // === å¤„ç†å³æ‹¬å· ===
                
                // å¦‚æœæ ˆç©ºï¼Œè¯´æ˜å³æ‹¬å·å¤šäº†ï¼Œæ— æ•ˆ
                if (stk.empty()) return false;
                
                char top = stk.top();
                
                // æ£€æŸ¥åŒ¹é…æ€§
                if ((c == ')' && top != '(') ||
                    (c == ']' && top != '[') ||
                    (c == '}' && top != '{')) {
                    return false;
                }
                
                // åŒ¹é…æˆåŠŸï¼Œå¼¹å‡º
                stk.pop();
            }
        }
        
        // æœ€åæ ˆå¿…é¡»ä¸ºç©º
        return stk.empty();
    }
};
```

---

## âš ï¸ æ˜“é”™ç‚¹æé†’

### 1. æ ˆåˆ¤ç©ºé¡ºåº
**æ˜“é”™ç‚¹**ï¼šåœ¨ Python ä»£ç  `if not stack or stack[-1] != pairs[char]:` ä¸­ï¼Œ`not stack` å¿…é¡»å†™åœ¨å‰é¢ã€‚
- **åŸå› **ï¼šåˆ©ç”¨é€»è¾‘è¿ç®—ç¬¦çš„**çŸ­è·¯ç‰¹æ€§**ã€‚å¦‚æœæ ˆä¸ºç©ºï¼Œ`not stack` ä¸º Trueï¼Œæ•´ä¸ªè¡¨è¾¾å¼ç›´æ¥ä¸º Trueï¼Œä¸ä¼šå»æ‰§è¡Œåé¢çš„ `stack[-1]`ã€‚
- **åæœ**ï¼šå¦‚æœåè¿‡æ¥å†™ï¼Œå½“æ ˆä¸ºç©ºæ—¶ï¼Œè®¿é—® `stack[-1]` ä¼šå¯¼è‡´ `IndexError`ã€‚

### 2. è¿”å›å€¼æ£€æŸ¥
**æ˜“é”™ç‚¹**ï¼šå¾ªç¯ç»“æŸåå¿˜è®°æ£€æŸ¥æ ˆæ˜¯å¦ä¸ºç©ºã€‚
- **åœºæ™¯**ï¼šè¾“å…¥ `((`ã€‚
- **åŸå› **ï¼šå¾ªç¯åªæ£€æŸ¥äº†å³æ‹¬å·æ˜¯å¦åŒ¹é…ï¼Œæ²¡æ£€æŸ¥å·¦æ‹¬å·æ˜¯å¦æœ‰å¤šä½™ã€‚
- **ä¿®æ­£**ï¼š`return not stack` (Python) æˆ– `return stk.empty()` (C++)ã€‚